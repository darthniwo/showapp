{"version":3,"sources":["directives/pagination.js"],"names":["angular","module","directive","pagination","$location","restrict","scope","count","take","activate","maxSize","hideArrows","template","link","element","queryPage","search","page","current","parseInt","pagesCount","$watchGroup","rebuild","isCurrent","isDisabled","pages","toPage","$on","locationChanged","value","type","options","buildOptions","calc","generate","Math","ceil","cellsLeft","cellsRight","lo","hi","list","generateFlat","generateFull","unshift","push","i"],"mappings":"AAAA,CAAC,YAAW;AACV;;AAEAA,UACGC,MADH,CACU,eADV,EAC2B,EAD3B,EAEGC,SAFH,CAEa,YAFb,EAE2B,CAAC,WAAD,EAAcC,UAAd,CAF3B;;AAIA,WAASA,UAAT,CAAoBC,SAApB,EAA+B;AAC7B,WAAO;AACLC,gBAAU,GADL;AAELC,aAAO;AACLC,eAAO,GADF;AAELC,cAAM,GAFD;AAGLC,kBAAU,GAHL;AAILC,iBAAS,IAJJ;AAKLC,oBAAY;AALP,OAFF;AASLC,gBAAUA,QATL;AAULC,YAAM,UAASP,KAAT,EAAgBQ,OAAhB,EAAyB;AAC7B,YAAIL,WAAWH,MAAMG,QAAN,EAAf;AACA,YAAIM,YAAYX,UAAUY,MAAV,GAAmBC,IAAnC;AACA,YAAIC,UAAUH,YAAYI,SAASJ,SAAT,CAAZ,GAAkC,CAAhD;AACA,YAAIK,UAAJ;;AAEAX,iBAASS,OAAT,EAAkBZ,MAAME,IAAxB;;AAEAF,cAAMe,WAAN,CAAkB,CAAC,MAAD,EAAS,OAAT,EAAkB,SAAlB,EAA6B,YAA7B,CAAlB,EAA8DC,OAA9D;AACAhB,cAAMiB,SAAN,GAAkBA,SAAlB;AACAjB,cAAMkB,UAAN,GAAmBA,UAAnB;AACAlB,cAAMmB,KAAN,GAAc,EAAd;AACAnB,cAAMoB,MAAN,GAAeA,MAAf;;AAEApB,cAAMqB,GAAN,CAAU,wBAAV,EAAoCC,eAApC;;AAEA,iBAASL,SAAT,CAAmBN,IAAnB,EAAyB;AACvB,iBAAOA,KAAKY,KAAL,KAAeX,OAAtB;AACD;;AAED,iBAASM,UAAT,CAAoBP,IAApB,EAA0B;AACxB,iBACEA,KAAKa,IAAL,KAAc,WAAd,IACCb,KAAKa,IAAL,KAAc,MAAd,IAAwBZ,YAAY,CADrC,IAECD,KAAKa,IAAL,KAAc,MAAd,IAAwBZ,YAAYE,UAHvC;AAKD;;AAED,iBAASM,MAAT,CAAgBT,IAAhB,EAAsB;AACpB,cAAIA,KAAKY,KAAL,KAAeX,OAAf,IAA0BD,KAAKa,IAAL,KAAc,WAA5C,EAAyD;;AAEzD,cAAIb,KAAKa,IAAL,KAAc,MAAlB,EAA0B;AACxBZ,sBAAUD,KAAKY,KAAf;AACD,WAFD,MAEO,IAAIZ,KAAKa,IAAL,KAAc,MAAlB,EAA0B;AAC/B,gBAAIZ,UAAU,CAAd,EAAiBA,UAAjB,KACK;AACN,WAHM,MAGA,IAAID,KAAKa,IAAL,KAAc,MAAlB,EAA0B;AAC/B,gBAAIZ,UAAUE,UAAd,EAA0BF,UAA1B,KACK;AACN;;AAEDT,mBAASS,OAAT,EAAkBZ,MAAME,IAAxB;AACAc;AACD;;AAED,iBAASA,OAAT,GAAmB;AACjB,cAAIS,UAAUC,cAAd;AACA,cAAIP,QAAQQ,KAAKF,OAAL,CAAZ;;AAEA,cAAI,CAACN,KAAL,EAAY;AACVnB,kBAAMmB,KAAN,GAAc,EAAd;AACA;AACD;;AAEDL,uBAAaK,MAAMlB,KAAnB;AACAD,gBAAMmB,KAAN,GAAcS,SAAST,KAAT,EAAgBM,OAAhB,CAAd;AACA3B,oBAAUY,MAAV,CAAiB,MAAjB,EAAyBE,OAAzB;AACD;;AAED,iBAASU,eAAT,GAA2B;AACzB,cAAIX,OAAOE,SAASf,UAAUY,MAAV,GAAmBC,IAA5B,CAAX;AACA,cAAI,CAACA,IAAL,EAAW;;AAEXX,gBAAMoB,MAAN,CAAa,EAACI,MAAM,MAAP,EAAeD,OAAOZ,IAAtB,EAAb;AACD;;AAED,iBAASe,YAAT,GAAwB;AACtB,cAAID,UAAU;AACZxB,mBAAOD,MAAMC,KADD;AAEZC,kBAAMF,MAAME,IAFA;AAGZE,qBAAS,EAHG;AAIZQ,qBAASA,OAJG;AAKZP,wBAAYL,MAAMK;AALN,WAAd;;AAQA,cAAIL,MAAMI,OAAV,EAAmB;AACjB,gBAAIJ,MAAMI,OAAN,GAAgB,CAApB,EAAuBqB,QAAQrB,OAAR,GAAkB,CAAlB,CAAvB,KACKqB,QAAQrB,OAAR,GAAkBJ,MAAMI,OAAxB;AACN;;AAED,iBAAOqB,OAAP;AACD;;AAED,iBAASE,IAAT,CAAcF,OAAd,EAAuB;AACrB,cAAIN,QAAQ,EAAZ;;AAEAA,gBAAMlB,KAAN,GAAc4B,KAAKC,IAAL,CAAUL,QAAQxB,KAAR,GAAgBwB,QAAQvB,IAAlC,CAAd;;AAEA,cAAI,CAACiB,MAAMlB,KAAP,IAAgBkB,MAAMlB,KAAN,KAAgB,CAApC,EAAuC;;AAEvC,cAAIwB,QAAQrB,OAAR,GAAkB,CAAlB,KAAwB,CAA5B,EAA+B;AAC7Be,kBAAMY,SAAN,GAAkBN,QAAQrB,OAAR,GAAkB,CAAlB,GAAsB,CAAxC;AACAe,kBAAMa,UAAN,GAAmBP,QAAQrB,OAAR,GAAkB,CAArC;AACD,WAHD,MAGO;AACLe,kBAAMY,SAAN,GAAkB,CAACN,QAAQrB,OAAR,GAAkB,CAAnB,IAAwB,CAA1C;AACAe,kBAAMa,UAAN,GAAmB,CAACP,QAAQrB,OAAR,GAAkB,CAAnB,IAAwB,CAA3C;AACD;;AAED,cAAI,CAACqB,QAAQpB,UAAb,EAAyB;AACvBc,kBAAMY,SAAN;AACAZ,kBAAMa,UAAN;AACD;;AAED,cAAIP,QAAQb,OAAR,GAAkBO,MAAMY,SAAN,GAAkB,CAAxC,EAA2CZ,MAAMY,SAAN;AAC3C,cAAIN,QAAQb,OAAR,GAAkBO,MAAMY,SAAN,GAAkB,CAAxC,EAA2CZ,MAAMY,SAAN;AAC3C,cAAIN,QAAQb,OAAR,GAAkBO,MAAMlB,KAAN,GAAckB,MAAMa,UAA1C,EACEb,MAAMa,UAAN;AACF,cAAIP,QAAQb,OAAR,GAAkBO,MAAMlB,KAAN,GAAckB,MAAMa,UAA1C,EACEb,MAAMa,UAAN;;AAEFb,gBAAMc,EAAN,GAAWR,QAAQb,OAAR,GAAkBO,MAAMY,SAAnC;AACAZ,gBAAMe,EAAN,GAAWT,QAAQb,OAAR,GAAkBO,MAAMa,UAAnC;;AAEA,cAAIb,MAAMc,EAAN,GAAW,CAAf,EAAkB;AAChBd,kBAAMe,EAAN,IAAY,IAAIf,MAAMc,EAAtB;AACAd,kBAAMc,EAAN,GAAW,CAAX;AACD;;AAED,cAAId,MAAMe,EAAN,GAAWf,MAAMlB,KAArB,EAA4B;AAC1BkB,kBAAMc,EAAN,IAAYd,MAAMe,EAAN,GAAWf,MAAMlB,KAA7B;AACAkB,kBAAMe,EAAN,GAAWf,MAAMlB,KAAjB;AACD;;AAED,iBAAOkB,KAAP;AACD;;AAED,iBAASS,QAAT,CAAkBT,KAAlB,EAAyBM,OAAzB,EAAkC;AAChC,cAAIU,IAAJ;;AAEA,cAAIhB,MAAMlB,KAAN,IAAewB,QAAQrB,OAA3B,EAAoC+B,OAAOC,aAAajB,KAAb,CAAP,CAApC,KACKgB,OAAOE,aAAalB,KAAb,CAAP;;AAEL,cAAI,CAACM,QAAQpB,UAAb,EAAyB;AACvB8B,iBAAKG,OAAL,CAAa,EAACd,MAAM,MAAP,EAAeD,OAAO,GAAtB,EAAb;AACAY,iBAAKI,IAAL,CAAU,EAACf,MAAM,MAAP,EAAeD,OAAO,GAAtB,EAAV;AACD;;AAED,iBAAOY,IAAP;AACD;;AAED,iBAASC,YAAT,CAAsBjB,KAAtB,EAA6B;AAC3B,cAAIgB,OAAO,EAAX;;AAEA,eAAK,IAAIK,IAAI,CAAb,EAAgBA,KAAKrB,MAAMlB,KAA3B,EAAkCuC,GAAlC,EAAuC;AACrCL,iBAAKI,IAAL,CAAU,EAACf,MAAM,MAAP,EAAeD,OAAOiB,CAAtB,EAAV;AACD;;AAED,iBAAOL,IAAP;AACD;;AAED,iBAASE,YAAT,CAAsBlB,KAAtB,EAA6B;AAC3B,cAAIgB,OAAO,EAAX;;AAEA,cAAIhB,MAAMc,EAAN,GAAW,CAAf,EAAkBE,KAAKI,IAAL,CAAU,EAACf,MAAM,MAAP,EAAeD,OAAO,CAAtB,EAAV;AAClB,cAAIJ,MAAMc,EAAN,GAAW,CAAf,EAAkBE,KAAKI,IAAL,CAAU,EAACf,MAAM,WAAP,EAAoBD,OAAO,KAA3B,EAAV;;AAElB,eAAK,IAAIiB,IAAIrB,MAAMc,EAAnB,EAAuBO,KAAKrB,MAAMe,EAAlC,EAAsCM,GAAtC,EAA2C;AACzC,gBAAIA,KAAK,CAAL,IAAUA,IAAIrB,MAAMlB,KAAxB,EAA+B;AAC/BkC,iBAAKI,IAAL,CAAU,EAACf,MAAM,MAAP,EAAeD,OAAOiB,CAAtB,EAAV;AACD;;AAED,cAAIrB,MAAMe,EAAN,GAAWf,MAAMlB,KAAN,GAAc,CAA7B,EAAgC;AAC9BkC,iBAAKI,IAAL,CAAU,EAACf,MAAM,WAAP,EAAoBD,OAAO,KAA3B,EAAV;AACD;;AAED,cAAIJ,MAAMe,EAAN,GAAWf,MAAMlB,KAArB,EAA4B;AAC1BkC,iBAAKI,IAAL,CAAU,EAACf,MAAM,MAAP,EAAeD,OAAOJ,MAAMlB,KAA5B,EAAV;AACD;;AAED,iBAAOkC,IAAP;AACD;AACF;AArLI,KAAP;AAuLD;;AAED,WAAS7B,QAAT,GAAoB;AAClB,WACE,6BACA,mBADA,GAEA,2BAFA,GAGA,4EAHA,GAIA,0BAJA,GAKA,kBALA,GAMA,QANA,GAOA,QARF;AAUD;AACF,CA7MD","file":"pagination.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('ng-pagination', [])\n    .directive('pagination', ['$location', pagination]);\n\n  function pagination($location) {\n    return {\n      restrict: 'E',\n      scope: {\n        count: '=',\n        take: '=',\n        activate: '&',\n        maxSize: '=?',\n        hideArrows: '=?',\n      },\n      template: template,\n      link: function(scope, element) {\n        var activate = scope.activate();\n        var queryPage = $location.search().page;\n        var current = queryPage ? parseInt(queryPage) : 1;\n        var pagesCount;\n\n        activate(current, scope.take);\n\n        scope.$watchGroup(['take', 'count', 'maxSize', 'hideArrows'], rebuild);\n        scope.isCurrent = isCurrent;\n        scope.isDisabled = isDisabled;\n        scope.pages = [];\n        scope.toPage = toPage;\n\n        scope.$on('$locationChangeSuccess', locationChanged);\n\n        function isCurrent(page) {\n          return page.value === current;\n        }\n\n        function isDisabled(page) {\n          return (\n            page.type === 'separator' ||\n            (page.type === 'prev' && current === 1) ||\n            (page.type === 'next' && current === pagesCount)\n          );\n        }\n\n        function toPage(page) {\n          if (page.value === current || page.type === 'separator') return;\n\n          if (page.type === 'page') {\n            current = page.value;\n          } else if (page.type === 'prev') {\n            if (current > 1) current--;\n            else return;\n          } else if (page.type === 'next') {\n            if (current < pagesCount) current++;\n            else return;\n          }\n\n          activate(current, scope.take);\n          rebuild();\n        }\n\n        function rebuild() {\n          var options = buildOptions();\n          var pages = calc(options);\n\n          if (!pages) {\n            scope.pages = [];\n            return;\n          }\n\n          pagesCount = pages.count;\n          scope.pages = generate(pages, options);\n          $location.search('page', current);\n        }\n\n        function locationChanged() {\n          var page = parseInt($location.search().page);\n          if (!page) return;\n\n          scope.toPage({type: 'page', value: page});\n        }\n\n        function buildOptions() {\n          var options = {\n            count: scope.count,\n            take: scope.take,\n            maxSize: 11,\n            current: current,\n            hideArrows: scope.hideArrows,\n          };\n\n          if (scope.maxSize) {\n            if (scope.maxSize < 7) options.maxSize = 7;\n            else options.maxSize = scope.maxSize;\n          }\n\n          return options;\n        }\n\n        function calc(options) {\n          var pages = {};\n\n          pages.count = Math.ceil(options.count / options.take);\n\n          if (!pages.count || pages.count === 1) return;\n\n          if (options.maxSize % 2 === 0) {\n            pages.cellsLeft = options.maxSize / 2 - 1;\n            pages.cellsRight = options.maxSize / 2;\n          } else {\n            pages.cellsLeft = (options.maxSize - 1) / 2;\n            pages.cellsRight = (options.maxSize - 1) / 2;\n          }\n\n          if (!options.hideArrows) {\n            pages.cellsLeft--;\n            pages.cellsRight--;\n          }\n\n          if (options.current > pages.cellsLeft + 1) pages.cellsLeft--;\n          if (options.current > pages.cellsLeft + 1) pages.cellsLeft--;\n          if (options.current < pages.count - pages.cellsRight)\n            pages.cellsRight--;\n          if (options.current < pages.count - pages.cellsRight)\n            pages.cellsRight--;\n\n          pages.lo = options.current - pages.cellsLeft;\n          pages.hi = options.current + pages.cellsRight;\n\n          if (pages.lo < 1) {\n            pages.hi += 1 - pages.lo;\n            pages.lo = 1;\n          }\n\n          if (pages.hi > pages.count) {\n            pages.lo -= pages.hi - pages.count;\n            pages.hi = pages.count;\n          }\n\n          return pages;\n        }\n\n        function generate(pages, options) {\n          var list;\n\n          if (pages.count <= options.maxSize) list = generateFlat(pages);\n          else list = generateFull(pages);\n\n          if (!options.hideArrows) {\n            list.unshift({type: 'prev', value: '<'});\n            list.push({type: 'next', value: '>'});\n          }\n\n          return list;\n        }\n\n        function generateFlat(pages) {\n          var list = [];\n\n          for (var i = 1; i <= pages.count; i++) {\n            list.push({type: 'page', value: i});\n          }\n\n          return list;\n        }\n\n        function generateFull(pages) {\n          var list = [];\n\n          if (pages.lo > 1) list.push({type: 'page', value: 1});\n          if (pages.lo > 2) list.push({type: 'separator', value: '...'});\n\n          for (var i = pages.lo; i <= pages.hi; i++) {\n            if (i <= 0 || i > pages.count) continue;\n            list.push({type: 'page', value: i});\n          }\n\n          if (pages.hi < pages.count - 1) {\n            list.push({type: 'separator', value: '...'});\n          }\n\n          if (pages.hi < pages.count) {\n            list.push({type: 'page', value: pages.count});\n          }\n\n          return list;\n        }\n      },\n    };\n  }\n\n  function template() {\n    return (\n      '<div class=\"pagination\">' +\n      '<div class=\"page\"' +\n      'ng-repeat=\"page in pages\"' +\n      'ng-class=\"{ \\'active\\': isCurrent(page), \\'disabled\\': isDisabled(page) }\"' +\n      'ng-click=\"toPage(page)\">' +\n      '{{ page.value }}' +\n      '</div>' +\n      '</div>'\n    );\n  }\n})();\n"]}