{"version":3,"sources":["controllers/moviesCtrl.js"],"names":["angular","module","controller","moviesCtrl","$scope","alertify","commonSrv","localStorageService","ctrl","common","ls","init","console","log","maps","movieGenres","getMovieGenres","then","state","movies","currentPage","totalItems","totalPages","limit","_setResults","data","results","total_pages","total_results","onPageChange","page","extra","method","get","urls","response"],"mappings":"AAAA;;AACA,CAAC,UAASA,OAAT,EAAkB;AACjBA,UACGC,MADH,CACU,SADV,EAEGC,UAFH,CAEc,YAFd,EAE4B,CACxB,QADwB,EAExB,UAFwB,EAGxB,WAHwB,EAIxB,qBAJwB,EAKxBC,UALwB,CAF5B;;AAUA,WAASA,UAAT,CAAoBC,MAApB,EAA4BC,QAA5B,EAAsCC,SAAtC,EAAiDC,mBAAjD,EAAsE;AACpE,UAAMC,OAAO,IAAb;AAAA,UACEC,SAASH,SADX;AAAA,UAEEI,KAAKH,mBAFP;;AAIA;;;;AAIA,UAAMI,OAAO,MAAM;AACjBC,cAAQC,GAAR,CAAY,YAAZ;AACA,UAAI,CAACJ,OAAOK,IAAP,CAAYC,WAAjB,EAA8B;AAC5BN,eAAOO,cAAP,GAAwBC,IAAxB,CAA6B,MAAM;AACjCT,eAAKU,KAAL,CAAWH,WAAX,GAAyBN,OAAOK,IAAP,CAAYC,WAArC;AACD,SAFD;AAGD,OAJD,MAIO;AACLP,aAAKU,KAAL,CAAWH,WAAX,GAAyBN,OAAOK,IAAP,CAAYC,WAArC;AACD;AACF,KATD;;AAWA;;;;AAIAP,SAAKU,KAAL,GAAa;AACXC,cAAQ,IADG;AAEXC,mBAAa,CAFF;AAGXC,kBAAY,CAHD;AAIXC,kBAAY,CAJD;AAKXC,aAAO,EALI;AAMXR,mBAAa;AANF,KAAb;;AASA;;;;AAIAP,SAAKgB,WAAL,GAAmBC,QAAQ;AACzB,YAAM,EAACC,OAAD,EAAUC,WAAV,EAAuBC,aAAvB,KAAwCH,IAA9C;AACAjB,WAAKU,KAAL,CAAWC,MAAX,GAAoBO,OAApB;AACAlB,WAAKU,KAAL,CAAWG,UAAX,GAAwBO,aAAxB;AACApB,WAAKU,KAAL,CAAWI,UAAX,GAAwBK,WAAxB;AACD,KALD;;AAOA;;;;;AAKAnB,SAAKqB,YAAL,GAAoBC,QAAQ;AAC1B,YAAMC,QAAQ,WAAWD,IAAzB;AACArB,aAAOuB,MAAP,CAAcC,GAAd,CAAkBxB,OAAOyB,IAAP,CAAYf,MAA9B,EAAsCY,KAAtC,EAA6Cd,IAA7C,CAAkD,MAAM;AACtDT,aAAKgB,WAAL,CAAiBf,OAAO0B,QAAxB;AACD,OAFD;AAGD,KALD;;AAOAxB;AACD;AACF,CArED,EAqEGX,OArEH","file":"moviesCtrl.js","sourcesContent":["'use strict';\n(function(angular) {\n  angular\n    .module('showapp')\n    .controller('moviesCtrl', [\n      '$scope',\n      'alertify',\n      'commonSrv',\n      'localStorageService',\n      moviesCtrl,\n    ]);\n\n  function moviesCtrl($scope, alertify, commonSrv, localStorageService) {\n    const ctrl = this,\n      common = commonSrv,\n      ls = localStorageService;\n\n    /**\n     * [init description]\n     * @return {[type]} [description]\n     */\n    const init = () => {\n      console.log('moviesCtrl');\n      if (!common.maps.movieGenres) {\n        common.getMovieGenres().then(() => {\n          ctrl.state.movieGenres = common.maps.movieGenres;\n        });\n      } else {\n        ctrl.state.movieGenres = common.maps.movieGenres;\n      }\n    };\n\n    /**\n     * [state description]\n     * @type {Object}\n     */\n    ctrl.state = {\n      movies: null,\n      currentPage: 1,\n      totalItems: 0,\n      totalPages: 0,\n      limit: 20,\n      movieGenres: null,\n    };\n\n    /**\n     * [_setResults description]\n     * @param {[type]} data [description]\n     */\n    ctrl._setResults = data => {\n      const {results, total_pages, total_results} = data;\n      ctrl.state.movies = results;\n      ctrl.state.totalItems = total_results;\n      ctrl.state.totalPages = total_pages;\n    };\n\n    /**\n     * [onPageChange description]\n     * @param  {[type]} page [description]\n     * @return {[type]}      [description]\n     */\n    ctrl.onPageChange = page => {\n      const extra = '&page=' + page;\n      common.method.get(common.urls.movies, extra).then(() => {\n        ctrl._setResults(common.response);\n      });\n    };\n\n    init();\n  }\n})(angular);\n"]}