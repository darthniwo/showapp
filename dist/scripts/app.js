"use strict";angular.module("showapp",["ui.router","ngCookies","ngAlertify","LocalStorageModule","ng-pagination"]),function(e){e.module("showapp").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("main",{url:"/",templateUrl:"views/layout.html",controller:"navCtrl",controllerAs:"nav"}).state("main.movies",{url:"movies",templateUrl:"views/movies.html",controller:"moviesCtrl",controllerAs:"obj"}).state("main.series",{url:"series",templateUrl:"views/series.html",controller:"seriesCtrl",controllerAs:"obj"}).state("main.favourites",{url:"favourites",templateUrl:"views/favs.html",controller:"favsCtrl",controllerAs:"obj"}).state("main.detail",{url:"detail/:key",templateUrl:"views/detail.html",controller:"detailCtrl",controllerAs:"obj"})}])}(angular),function(e){e.module("showapp").directive("showErrors",function(){return{restrict:"A",require:"^form",link:function(t,n,r,o){var a=n[0].querySelector("[name]"),i=e.element(a),s=i.attr("name");t.$on("show-errors-check-validity",function(){n.toggleClass("has-error",o[s].$invalid)}),i.bind("blur",function(){n.toggleClass("has-error",o[s].$invalid)})}}})}(angular),function(e){e.module("showapp").directive("onFinishRender",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){!0===t.$last&&e(function(){t.$emit("ngRepeatFinished")})}}}])}(angular),function(e){e.module("showapp").filter("truncate",function(){return function(e,t,n){try{return isNaN(t)&&(t=10),void 0===n&&(n="..."),e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t-n.length)+n}catch(e){}}})}(angular),function(e){e.module("showapp").directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(t.altKey||e.$apply(function(){e.$eval(n.ngEnter),t.preventDefault()}))})}})}(angular),function(){function e(){return'<div class="pagination"><div class="page"ng-repeat="page in pages"ng-class="{ \'active\': isCurrent(page), \'disabled\': isDisabled(page) }"ng-click="toPage(page)">{{ page.value }}</div></div>'}angular.module("ng-pagination",[]).directive("pagination",["$location",function(t){return{restrict:"E",scope:{count:"=",take:"=",activate:"&",maxSize:"=?",hideArrows:"=?"},template:e,link:function(e,n){var r,o=e.activate(),a=t.search().page,i=a?parseInt(a):1;function s(){var n=function(){var t={count:e.count,take:e.take,maxSize:11,current:i,hideArrows:e.hideArrows};e.maxSize&&(e.maxSize<7?t.maxSize=7:t.maxSize=e.maxSize);return t}(),o=function(e){var t={};if(t.count=Math.ceil(e.count/e.take),!t.count||1===t.count)return;e.maxSize%2==0?(t.cellsLeft=e.maxSize/2-1,t.cellsRight=e.maxSize/2):(t.cellsLeft=(e.maxSize-1)/2,t.cellsRight=(e.maxSize-1)/2);e.hideArrows||(t.cellsLeft--,t.cellsRight--);e.current>t.cellsLeft+1&&t.cellsLeft--;e.current>t.cellsLeft+1&&t.cellsLeft--;e.current<t.count-t.cellsRight&&t.cellsRight--;e.current<t.count-t.cellsRight&&t.cellsRight--;t.lo=e.current-t.cellsLeft,t.hi=e.current+t.cellsRight,t.lo<1&&(t.hi+=1-t.lo,t.lo=1);t.hi>t.count&&(t.lo-=t.hi-t.count,t.hi=t.count);return t}(n);o?(r=o.count,e.pages=function(e,t){var n;n=e.count<=t.maxSize?function(e){for(var t=[],n=1;n<=e.count;n++)t.push({type:"page",value:n});return t}(e):function(e){var t=[];e.lo>1&&t.push({type:"page",value:1});e.lo>2&&t.push({type:"separator",value:"..."});for(var n=e.lo;n<=e.hi;n++)n<=0||n>e.count||t.push({type:"page",value:n});e.hi<e.count-1&&t.push({type:"separator",value:"..."});e.hi<e.count&&t.push({type:"page",value:e.count});return t}(e);t.hideArrows||(n.unshift({type:"prev",value:"<"}),n.push({type:"next",value:">"}));return n}(o,n),t.search("page",i)):e.pages=[]}o(i,e.take),e.$watchGroup(["take","count","maxSize","hideArrows"],s),e.isCurrent=function(e){return e.value===i},e.isDisabled=function(e){return"separator"===e.type||"prev"===e.type&&1===i||"next"===e.type&&i===r},e.pages=[],e.toPage=function(t){if(t.value===i||"separator"===t.type)return;if("page"===t.type)i=t.value;else if("prev"===t.type){if(!(i>1))return;i--}else if("next"===t.type){if(!(i<r))return;i++}o(i,e.take),s()},e.$on("$locationChangeSuccess",function(){var n=parseInt(t.search().page);if(!n)return;e.toPage({type:"page",value:n})})}}}])}(),function(e){e.module("showapp").factory("commonSrv",["$http","$cookies","alertify",function(e,t,n){const r={maps:{},urls:{api:"https://api.themoviedb.org/3",movieGenres:"/genre/movie/list",tvGenres:"/genre/tv/list",series:"/discover/tv",movies:"/discover/movie",movieSearch:"/search/movie",tvSearch:"/search/tv"},apiKey:"?api_key=09b9ece1e65a600aca53a9b246cedd9e",response:null};return r.toMap=((e,t,n)=>{r.maps[t]||(r.maps[t]={}),e.forEach(e=>{r.maps[t][e[n]]=e}),r.maps[t].src=e}),r.getMovieGenres=(()=>r.method.get(r.urls.movieGenres).then(()=>{const{genres:e}=r.response;r.toMap(e,"movieGenres","id")})),r.getTVGenres=(()=>r.method.get(r.urls.tvGenres).then(()=>{const{genres:e}=r.response;r.toMap(e,"tvGenres","id")})),r.method={get:(t,n="")=>e({method:"GET",url:r.urls.api+t+r.apiKey+n}).then(e=>{r.response=e.data})},r}])}(angular),function(e){e.module("showapp").controller("navCtrl",["$scope","$state","alertify","commonSrv","localStorageService",function(e,t,n,r,o){const a=this,i=o;a.locations=["movies","series","favourites"],a.navigate=(e=>{a.activeLink=e,i.set("activeLink",e),t.go("main."+e)}),a.getActiveLink=(()=>i.get("activeLink")),a.activeLink=a.getActiveLink(),a.activeLink||(a.activeLink="movies",i.set("activeLink",a.activeLink),t.go("main.movies"))}])}(angular),function(e){e.module("showapp").controller("moviesCtrl",["$scope","alertify","commonSrv","localStorageService",function(e,t,n,r){const o=this,a=n;o.state={movies:null,currentPage:1,totalItems:0,totalPages:0,limit:20,movieGenres:null},o._setResults=(e=>{const{results:t,total_pages:n,total_results:r}=e;o.state.movies=t,o.state.totalItems=r,o.state.totalPages=n}),o.onPageChange=(e=>{const t="&page="+e;a.method.get(a.urls.movies,t).then(()=>{o._setResults(a.response)})}),console.log("moviesCtrl"),a.maps.movieGenres?o.state.movieGenres=a.maps.movieGenres:a.getMovieGenres().then(()=>{o.state.movieGenres=a.maps.movieGenres})}])}(angular),function(e){e.module("showapp").controller("seriesCtrl",["$scope","alertify","commonSrv","localStorageService",function(e,t,n,r){const o=this,a=n;o.state={series:null,currentPage:1,totalItems:0,totalPages:0},o.getInitialList=(()=>{a.method.get(a.urls.series).then(()=>{const{results:e,total_pages:t,total_results:n}=a.response;o.state.series=e,o.state.totalItems=n,o.state.totalPages=t})}),console.log("seriesCtrl"),o.getInitialList()}])}(angular),function(e){e.module("showapp").controller("favsCtrl",["$scope","alertify","commonSrv","localStorageService",function(e,t,n,r){console.log("favsCtrl")}])}(angular);